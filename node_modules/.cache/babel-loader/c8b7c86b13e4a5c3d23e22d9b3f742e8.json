{"ast":null,"code":"var _jsxFileName = \"D:\\\\Git files\\\\Minecraft\\\\minecraftClone-JS\\\\src\\\\components\\\\Player.js\",\n    _s = $RefreshSig$();\n\nimport { useFrame, useThree } from '@react-three/fiber';\nimport { useSphere } from '@react-three/cannon';\nimport { useEffect, useRef } from 'react';\nimport { Vector3 } from 'three';\nimport { useKeyboard } from '../hooks/useKeyboard';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst JUMP_FORCE = 4;\nconst SPEED = 4;\nexport const Player = () => {\n  _s();\n\n  const {\n    moveBackward,\n    moveForward,\n    moveLeft,\n    moveRight,\n    jump\n  } = useKeyboard();\n  const {\n    camera\n  } = useThree();\n  const [ref, api] = useSphere(() => ({\n    mass: 1,\n    type: \"Dynamic\",\n    position: [0, 1, 0]\n  }));\n  const vel = useRef([0, 0, 0]);\n  useEffect(() => {\n    api.velocity.subscribe(v => vel.current = v);\n  }, [api.velocity]);\n  const pos = useRef([0, 0, 0]);\n  useEffect(() => {\n    api.position.subscribe(p => pos.current = p);\n  }, [api.position]);\n  useFrame(() => {\n    camera.position.copy(new Vector3(pos.current[0], pos.current[1], pos.current[2]));\n    const direction = new Vector3();\n    const frontVector = new Vector3(0, 0, (moveBackward ? 1 : 0) - (moveForward ? 1 : 0));\n    const sideVector = new Vector3((moveLeft ? 1 : 0) - (moveRight ? 1 : 0), 0, 0);\n    direction.subVectors(frontVector, sideVector).normalize().multiplyScalar(SPEED).applyEuler(camera.rotation);\n    api.velocity.set(direction.x, vel.current[1], direction.z);\n\n    if (jump && Math.abs(vel.current[1]) < 0.05) {\n      api.velocity.set(vel.current[0], JUMP_FORCE, vel.current[2]);\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(\"mesh\", {\n    ref: ref\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Player, \"V+0BfJ12OdCifosXy80Hy5VTJ6M=\", false, function () {\n  return [useKeyboard, useThree, useSphere, useFrame];\n});\n\n_c = Player;\n\nvar _c;\n\n$RefreshReg$(_c, \"Player\");","map":{"version":3,"names":["useFrame","useThree","useSphere","useEffect","useRef","Vector3","useKeyboard","JUMP_FORCE","SPEED","Player","moveBackward","moveForward","moveLeft","moveRight","jump","camera","ref","api","mass","type","position","vel","velocity","subscribe","v","current","pos","p","copy","direction","frontVector","sideVector","subVectors","normalize","multiplyScalar","applyEuler","rotation","set","x","z","Math","abs"],"sources":["D:/Git files/Minecraft/minecraftClone-JS/src/components/Player.js"],"sourcesContent":["import {useFrame, useThree} from '@react-three/fiber'\r\nimport {useSphere} from '@react-three/cannon'\r\nimport {useEffect, useRef} from 'react'\r\nimport { Vector3 } from 'three';\r\nimport { useKeyboard } from '../hooks/useKeyboard';\r\n\r\nconst JUMP_FORCE=4;\r\nconst SPEED=4;\r\n\r\nexport const Player=()=>{\r\n  const {moveBackward,moveForward,moveLeft,moveRight,jump}=useKeyboard();\r\n\r\n  const {camera}=useThree();\r\n  const [ref,api]=useSphere(()=>({\r\n    mass:1,\r\n    type:\"Dynamic\",\r\n    position:[0,1,0]\r\n  }))\r\n\r\n  const vel=useRef([0,0,0]);\r\n  useEffect(()=>{\r\n    api.velocity.subscribe((v)=> vel.current=v);\r\n  },[api.velocity]) \r\n\r\n  const pos=useRef([0,0,0]);\r\n  useEffect(()=>{ \r\n    api.position.subscribe((p)=> pos.current=p);\r\n  },[api.position])\r\n\r\n  useFrame(()=>{\r\n    camera.position.copy(new Vector3(pos.current[0],pos.current[1],pos.current[2]));\r\n\r\n    const direction=new Vector3();\r\n    const frontVector=new Vector3(\r\n      0,\r\n      0,\r\n      (moveBackward?1:0)-(moveForward?1:0)\r\n    );\r\n    const sideVector=new Vector3(\r\n      (moveLeft?1:0)-(moveRight?1:0),\r\n      0,\r\n      0\r\n    );\r\n\r\n    direction\r\n    .subVectors(frontVector,sideVector)\r\n    .normalize()\r\n    .multiplyScalar(SPEED)\r\n    .applyEuler(camera.rotation);\r\n\r\n    api.velocity.set(direction.x,vel.current[1],direction.z)\r\n\r\n    if(jump && Math.abs(vel.current[1])<0.05){\r\n      api.velocity.set(vel.current[0],JUMP_FORCE,vel.current[2]);\r\n    }\r\n  })\r\n\r\n  return (\r\n    <mesh ref={ref}>\r\n\r\n    </mesh>\r\n  )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}