{"ast":null,"code":"import _slicedToArray from\"D:/Git files/Minecraft/minecraftClone-JS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useFrame,useThree}from'@react-three/fiber';import{useSphere}from'@react-three/cannon';import{useEffect,useRef}from'react';import{Vector3}from'three';import{useKeyboard}from'../hooks/useKeyboard';import{jsx as _jsx}from\"react/jsx-runtime\";var JUMP_FORCE=4;var SPEED=4;export var Player=function Player(){var _useKeyboard=useKeyboard(),moveBackward=_useKeyboard.moveBackward,moveForward=_useKeyboard.moveForward,moveLeft=_useKeyboard.moveLeft,moveRight=_useKeyboard.moveRight,jump=_useKeyboard.jump;var _useThree=useThree(),camera=_useThree.camera;var _useSphere=useSphere(function(){return{mass:1,type:\"Dynamic\",position:[0,1,0]};}),_useSphere2=_slicedToArray(_useSphere,2),ref=_useSphere2[0],api=_useSphere2[1];var vel=useRef([0,0,0]);useEffect(function(){api.velocity.subscribe(function(v){return vel.current=v;});},[api.velocity]);var pos=useRef([0,0,0]);useEffect(function(){api.position.subscribe(function(p){return pos.current=p;});},[api.position]);useFrame(function(){camera.position.copy(new Vector3(pos.current[0],pos.current[1],pos.current[2]));var direction=new Vector3();var frontVector=new Vector3(0,0,(moveBackward?1:0)-(moveForward?1:0));var sideVector=new Vector3((moveLeft?1:0)-(moveRight?1:0),0,0);direction.subVectors(frontVector,sideVector).normalize().multiplyScalar(SPEED).applyEuler(camera.rotation);api.velocity.set(direction.x,vel.current[1],direction.z);if(jump&&Math.abs(vel.current[1])<0.05){api.velocity.set(vel.current[0],JUMP_FORCE,vel.current[2]);}});return/*#__PURE__*/_jsx(\"mesh\",{ref:ref});};","map":{"version":3,"names":["useFrame","useThree","useSphere","useEffect","useRef","Vector3","useKeyboard","JUMP_FORCE","SPEED","Player","moveBackward","moveForward","moveLeft","moveRight","jump","camera","mass","type","position","ref","api","vel","velocity","subscribe","v","current","pos","p","copy","direction","frontVector","sideVector","subVectors","normalize","multiplyScalar","applyEuler","rotation","set","x","z","Math","abs"],"sources":["D:/Git files/Minecraft/minecraftClone-JS/src/components/Player.js"],"sourcesContent":["import {useFrame, useThree} from '@react-three/fiber'\r\nimport {useSphere} from '@react-three/cannon'\r\nimport {useEffect, useRef} from 'react'\r\nimport { Vector3 } from 'three';\r\nimport { useKeyboard } from '../hooks/useKeyboard';\r\n\r\nconst JUMP_FORCE=4;\r\nconst SPEED=4;\r\n\r\nexport const Player=()=>{\r\n  const {moveBackward,moveForward,moveLeft,moveRight,jump}=useKeyboard();\r\n\r\n  const {camera}=useThree();\r\n  const [ref,api]=useSphere(()=>({\r\n    mass:1,\r\n    type:\"Dynamic\",\r\n    position:[0,1,0]\r\n  }))\r\n\r\n  const vel=useRef([0,0,0]);\r\n  useEffect(()=>{\r\n    api.velocity.subscribe((v)=> vel.current=v);\r\n  },[api.velocity]) \r\n\r\n  const pos=useRef([0,0,0]);\r\n  useEffect(()=>{ \r\n    api.position.subscribe((p)=> pos.current=p);\r\n  },[api.position])\r\n\r\n  useFrame(()=>{\r\n    camera.position.copy(new Vector3(pos.current[0],pos.current[1],pos.current[2]));\r\n\r\n    const direction=new Vector3();\r\n    const frontVector=new Vector3(\r\n      0,\r\n      0,\r\n      (moveBackward?1:0)-(moveForward?1:0)\r\n    );\r\n    const sideVector=new Vector3(\r\n      (moveLeft?1:0)-(moveRight?1:0),\r\n      0,\r\n      0\r\n    );\r\n\r\n    direction\r\n    .subVectors(frontVector,sideVector)\r\n    .normalize()\r\n    .multiplyScalar(SPEED)\r\n    .applyEuler(camera.rotation);\r\n\r\n    api.velocity.set(direction.x,vel.current[1],direction.z)\r\n\r\n    if(jump && Math.abs(vel.current[1])<0.05){\r\n      api.velocity.set(vel.current[0],JUMP_FORCE,vel.current[2]);\r\n    }\r\n  })\r\n\r\n  return (\r\n    <mesh ref={ref}>\r\n\r\n    </mesh>\r\n  )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}